{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/ayan/Programming/NextFasterPostgres/src/components/ui/product-card.tsx"],"sourcesContent":["\"use client\";\nimport { Link } from \"@/components/ui/link\";\nimport NextImage from \"next/image\";\nimport { getImageProps } from \"next/image\";\nimport { Product } from \"@/db/schema\";\nimport { useEffect } from \"react\";\n\nexport function getProductLinkImageProps(\n  imageUrl: string,\n  productName: string,\n) {\n  return getImageProps({\n    width: 48,\n    height: 48,\n    quality: 65,\n    src: imageUrl,\n    alt: `A small picture of ${productName}`,\n  });\n}\n\nexport function ProductLink(props: {\n  imageUrl?: string | null;\n  category_slug: string;\n  subcategory_slug: string;\n  loading: \"eager\" | \"lazy\";\n  product: Product;\n}) {\n  const { category_slug, subcategory_slug, product, imageUrl } = props;\n\n  // prefetch the main image for the product page, if this is too heavy\n  // we could only prefetch the first few cards, then prefetch on hover\n  const prefetchProps = getImageProps({\n    height: 256,\n    quality: 80,\n    width: 256,\n    src: imageUrl ?? \"/placeholder.svg?height=64&width=64\",\n    alt: `A small picture of ${product.name}`,\n  });\n  useEffect(() => {\n    try {\n      const iprops = prefetchProps.props;\n      const img = new Image();\n      // Don't interfer with important requests\n      img.fetchPriority = \"low\";\n      // Don't block the main thread with prefetch images\n      img.decoding = \"async\";\n      // Order is important here, sizes must be set before srcset, srcset must be set before src\n      if (iprops.sizes) img.sizes = iprops.sizes;\n      if (iprops.srcSet) img.srcset = iprops.srcSet;\n      if (iprops.src) img.src = iprops.src;\n    } catch (e) {\n      console.error(\"failed to preload\", prefetchProps.props.src, e);\n    }\n  }, [prefetchProps]);\n  return (\n    <Link\n      prefetch={true}\n      className=\"group flex h-[130px] w-full flex-row border px-4 py-2 hover:bg-gray-100 sm:w-[250px]\"\n      href={`/products/${category_slug}/${subcategory_slug}/${product.slug}`}\n    >\n      <div className=\"py-2\">\n        <NextImage\n          loading={props.loading}\n          decoding=\"sync\"\n          src={imageUrl ?? \"/placeholder.svg?height=48&width=48\"}\n          alt={`A small picture of ${product.name}`}\n          width={48}\n          height={48}\n          quality={65}\n          className=\"h-auto w-12 flex-shrink-0 object-cover\"\n        />\n      </div>\n      <div className=\"px-2\" />\n      <div className=\"h-26 flex flex-grow flex-col items-start py-2\">\n        <div className=\"text-sm font-medium text-gray-700 group-hover:underline\">\n          {product.name}\n        </div>\n        <p className=\"overflow-hidden text-xs\">{product.description}</p>\n      </div>\n    </Link>\n  );\n}\n"],"names":["c","_c","Link","NextImage","getImageProps","Product","useEffect","getProductLinkImageProps","imageUrl","productName","width","height","quality","src","alt","ProductLink","props","$","$i","Symbol","for","category_slug","subcategory_slug","product","t0","t1","name","t2","prefetchProps","t3","iprops","img","Image","fetchPriority","decoding","sizes","srcSet","srcset","t4","e","console","error","t5","slug","t6","t7","t8","loading","t9","t10","t11","description","t12","t13"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///home/ayan/Programming/NextFasterPostgres/src/lib/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { getCart, updateCart } from \"./cart\";\n\nexport async function addToCart(prevState: unknown, formData: FormData) {\n  const prevCart = await getCart();\n  const productSlug = formData.get(\"productSlug\");\n  if (typeof productSlug !== \"string\") {\n    return;\n  }\n  const itemAlreadyExists = prevCart.find(\n    (item) => item.productSlug === productSlug,\n  );\n  if (itemAlreadyExists) {\n    const newQuantity = itemAlreadyExists.quantity + 1;\n    const newCart = prevCart.map((item) => {\n      if (item.productSlug === productSlug) {\n        return {\n          ...item,\n          quantity: newQuantity,\n        };\n      }\n      return item;\n    });\n    await updateCart(newCart);\n  } else {\n    const newCart = [\n      ...prevCart,\n      {\n        productSlug,\n        quantity: 1,\n      },\n    ];\n    await updateCart(newCart);\n  }\n\n  return \"Item added to cart\";\n}\n\nexport async function removeFromCart(formData: FormData) {\n  const prevCart = await getCart();\n  const productSlug = formData.get(\"productSlug\");\n  if (typeof productSlug !== \"string\") {\n    return;\n  }\n  const itemAlreadyExists = prevCart.find(\n    (item) => item.productSlug === productSlug,\n  );\n  if (!itemAlreadyExists) {\n    return;\n  }\n  const newCart = prevCart.filter((item) => item.productSlug !== productSlug);\n  await updateCart(newCart);\n}\n"],"names":[],"mappings":";;;;;;;IAIsB,YAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":["file:///home/ayan/Programming/NextFasterPostgres/src/components/add-to-cart-form.tsx"],"sourcesContent":["\"use client\";\nimport { useActionState } from \"react\";\nimport { addToCart } from \"@/lib/actions\";\n\nexport function AddToCartForm({ productSlug }: { productSlug: string }) {\n  const [message, formAction, isPending] = useActionState(addToCart, null);\n  return (\n    <form className=\"flex flex-col gap-2\" action={formAction}>\n      <input type=\"hidden\" name=\"productSlug\" value={productSlug} />\n      <button\n        type=\"submit\"\n        className=\"max-w-[150px] rounded-[2px] bg-accent1 px-5 py-1 text-sm font-semibold text-white\"\n      >\n        Add to cart\n      </button>\n      {isPending && <p>Adding to cart...</p>}\n      {!isPending && message && <p>{message}</p>}\n    </form>\n  );\n}\n"],"names":["c","_c","useActionState","addToCart","AddToCartForm","t0","$","$i","Symbol","for","productSlug","message","formAction","isPending","t1","t2","t3","t4","t5"],"mappings":"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","ignoreList":[]}}]
}