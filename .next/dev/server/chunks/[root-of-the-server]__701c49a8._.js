module.exports = [
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[project]/src/lib/unstable-cache.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "unstable_cache",
    ()=>unstable_cache
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$cache$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/cache.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react.js [app-route] (ecmascript)");
;
;
const unstable_cache = (callback, key, options)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["cache"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$cache$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unstable_cache"])(callback, key, options));
}),
"[externals]/crypto [external] (crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}),
"[externals]/node:buffer [external] (node:buffer, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:buffer", () => require("node:buffer"));

module.exports = mod;
}),
"[externals]/node:crypto [external] (node:crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:crypto", () => require("node:crypto"));

module.exports = mod;
}),
"[externals]/node:util [external] (node:util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:util", () => require("node:util"));

module.exports = mod;
}),
"[project]/src/lib/session.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "comparePasswords",
    ()=>comparePasswords,
    "getSession",
    ()=>getSession,
    "hashPassword",
    ()=>hashPassword,
    "setSession",
    ()=>setSession,
    "signToken",
    ()=>signToken,
    "verifyToken",
    ()=>verifyToken
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bcryptjs$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/bcryptjs/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$node$2f$esm$2f$jwt$2f$sign$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/jose/dist/node/esm/jwt/sign.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$node$2f$esm$2f$jwt$2f$verify$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/jose/dist/node/esm/jwt/verify.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$headers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/headers.js [app-route] (ecmascript)");
;
;
;
const key = new TextEncoder().encode(process.env.AUTH_SECRET);
const SALT_ROUNDS = 10;
async function hashPassword(password) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bcryptjs$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["hash"])(password, SALT_ROUNDS);
}
async function comparePasswords(plainTextPassword, hashedPassword) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bcryptjs$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["compare"])(plainTextPassword, hashedPassword);
}
async function signToken(payload) {
    return await new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$node$2f$esm$2f$jwt$2f$sign$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SignJWT"](payload).setProtectedHeader({
        alg: "HS256"
    }).setIssuedAt().setExpirationTime("1 day from now").sign(key);
}
async function verifyToken(input) {
    const { payload } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$node$2f$esm$2f$jwt$2f$verify$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["jwtVerify"])(input, key, {
        algorithms: [
            "HS256"
        ]
    });
    return payload;
}
async function getSession() {
    const session = (await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$headers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["cookies"])()).get("session")?.value;
    if (!session) return null;
    return await verifyToken(session);
}
async function setSession(user) {
    const expiresInOneDay = new Date(Date.now() + 24 * 60 * 60 * 1000);
    const session = {
        user: {
            id: user.id
        },
        expires: expiresInOneDay.toISOString()
    };
    const encryptedSession = await signToken(session);
    (await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$headers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["cookies"])()).set("session", encryptedSession, {
        expires: expiresInOneDay,
        httpOnly: true,
        secure: true,
        sameSite: "lax"
    });
}
}),
"[externals]/pg [external] (pg, esm_import)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

const mod = await __turbopack_context__.y("pg");

__turbopack_context__.n(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[project]/src/db/index.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

// import * as schema from "./schema";
// import { drizzle } from "drizzle-orm/neon-http";
// import { neon } from "@neondatabase/serverless";
//
// const sql = neon(
//   "postgresql://neondb_owner:npg_A6mkNxw3uiZn@ep-dark-water-ahidvgxk-pooler.c-3.us-east-1.aws.neon.tech/neondb",
// );
// export const db = drizzle({ client: sql, schema });
//
__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$pg__$5b$external$5d$__$28$pg$2c$__esm_import$29$__ = __turbopack_context__.i("[externals]/pg [external] (pg, esm_import)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$pg__$5b$external$5d$__$28$pg$2c$__esm_import$29$__
]);
[__TURBOPACK__imported__module__$5b$externals$5d2f$pg__$5b$external$5d$__$28$pg$2c$__esm_import$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
const pool = new __TURBOPACK__imported__module__$5b$externals$5d2f$pg__$5b$external$5d$__$28$pg$2c$__esm_import$29$__["Pool"]({
    user: 'shujan',
    host: 'localhost',
    database: 'nextfaster',
    password: 'shujan@786',
    port: 5432
});
pool.on('connect', ()=>{
    console.log('pool working');
});
pool.on('error', (err)=>{
    console.log(err.message);
});
const __TURBOPACK__default__export__ = pool;
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/src/lib/queries.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "getCategory",
    ()=>getCategory,
    "getCategoryProductCount",
    ()=>getCategoryProductCount,
    "getCollectionDetails",
    ()=>getCollectionDetails,
    "getCollections",
    ()=>getCollections,
    "getProductCount",
    ()=>getProductCount,
    "getProductDetails",
    ()=>getProductDetails,
    "getProductsForSubcategory",
    ()=>getProductsForSubcategory,
    "getSearchResults",
    ()=>getSearchResults,
    "getSubcategory",
    ()=>getSubcategory,
    "getSubcategoryProductCount",
    ()=>getSubcategoryProductCount,
    "getUser",
    ()=>getUser
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$headers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/headers.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$unstable$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/unstable-cache.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$session$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/session.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/index.ts [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
;
;
;
async function getUser() {
    const cookieStore = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$headers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["cookies"])();
    const sessionCookie = cookieStore.get("session");
    if (!sessionCookie?.value) return null;
    const sessionData = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$session$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["verifyToken"])(sessionCookie.value);
    if (!sessionData?.user || typeof sessionData.user.id !== "number" || new Date(sessionData.expires) < new Date()) {
        return null;
    }
    const { rows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].query(`
    SELECT id, username 
    FROM users
    WHERE id = $1
    `, [
        sessionData.user.id
    ]);
    return rows[0] ?? null;
}
const getProductsForSubcategory = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$unstable$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unstable_cache"])(async (subcategorySlug)=>{
    const { rows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].query(`
      SELECT *
      FROM products
      WHERE subcategory_slug = $1
      ORDER BY slug ASC
      `, [
        subcategorySlug
    ]);
    return rows;
}, [
    "subcategory-products"
], {
    revalidate: 60 * 60 * 2
});
const getProductDetails = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$unstable$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unstable_cache"])(async (productSlug)=>{
    const { rows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].query(`
      SELECT *
      FROM products
      WHERE slug = $1
      LIMIT 1
      `, [
        productSlug
    ]);
    console.log("product details " + rows[0]);
    return rows[0] ?? null;
}, [
    "product"
], {
    revalidate: 60 * 60 * 2
});
const getCollections = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$unstable$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unstable_cache"])(async ()=>{
    const { rows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].query(`
      SELECT
        c.*,
        COALESCE(
          json_agg(cat.* ORDER BY cat.name)
          FILTER (WHERE cat.slug IS NOT NULL),
          '[]'
        ) AS categories
      FROM collections c
      LEFT JOIN categories cat
        ON cat.collection_id = c.id
      GROUP BY c.id
      ORDER BY c.name ASC
      `);
    console.log("collections " + rows);
    return rows;
}, [
    "collections"
], {
    revalidate: 60 * 60 * 2
});
const getCollectionDetails = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$unstable$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unstable_cache"])(async (collectionSlug)=>{
    const { rows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].query(`
      SELECT
        c.*,
        COALESCE(
          json_agg(cat.* ORDER BY cat.name)
          FILTER (WHERE cat.slug IS NOT NULL),
          '[]'
        ) AS categories
      FROM collections c
      LEFT JOIN categories cat
        ON cat.collection_id = c.id
      WHERE c.slug = $1
      GROUP BY c.id
      `, [
        collectionSlug
    ]);
    console.log("collecion details " + rows);
    return rows;
}, [
    "collection"
], {
    revalidate: 60 * 60 * 2
});
const getCategory = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$unstable$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unstable_cache"])(async (categorySlug)=>{
    const { rows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].query(`
      SELECT
        c.slug,
        c.name,
        c.image_url,
        COALESCE(
          json_agg(
            json_build_object(
              'id', sc.id,
              'name', sc.name,
              'subcategories', (
                SELECT COALESCE(
                  json_agg(
                    json_build_object(
                      'slug', s.slug,
                      'name', s.name,
                      'image_url', s.image_url
                    )
                    ORDER BY s.slug
                  ),
                  '[]'::json
                )
                FROM subcategories s
                WHERE s.subcollection_id = sc.id
              )
            )
            ORDER BY sc.name
          ) FILTER (WHERE sc.id IS NOT NULL),
          '[]'::json
        ) AS subcollections
      FROM categories c
      LEFT JOIN subcollections sc
        ON sc.category_slug = c.slug
      WHERE c.slug = $1
      GROUP BY c.slug, c.name, c.image_url
      `, [
        categorySlug
    ]);
    return rows[0] ?? null;
}, [
    "category"
], {
    revalidate: 60 * 60 * 2
});
const getSubcategory = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$unstable$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unstable_cache"])(async (subcategorySlug)=>{
    const { rows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].query(`
      SELECT *
      FROM subcategories
      WHERE slug = $1
      LIMIT 1
      `, [
        subcategorySlug
    ]);
    return rows[0] ?? null;
}, [
    "subcategory"
], {
    revalidate: 60 * 60 * 2
});
const getProductCount = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$unstable$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unstable_cache"])(async ()=>{
    const { rows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].query(`SELECT COUNT(*)::int AS count FROM products`);
    return rows[0].count;
}, [
    "total-product-count"
], {
    revalidate: 60 * 60 * 2
});
const getCategoryProductCount = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$unstable$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unstable_cache"])(async (categorySlug)=>{
    const { rows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].query(`
      SELECT COUNT(p.*)::int AS count
      FROM categories c
      LEFT JOIN subcollections sc
        ON sc.category_slug = c.slug
      LEFT JOIN subcategories s
        ON s.subcollection_id = sc.id
      LEFT JOIN products p
        ON p.subcategory_slug = s.slug
      WHERE c.slug = $1
      `, [
        categorySlug
    ]);
    return rows[0].count;
}, [
    "category-product-count"
], {
    revalidate: 60 * 60 * 2
});
const getSubcategoryProductCount = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$unstable$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unstable_cache"])(async (subcategorySlug)=>{
    const { rows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].query(`
      SELECT COUNT(*)::int AS count
      FROM products
      WHERE subcategory_slug = $1
      `, [
        subcategorySlug
    ]);
    return rows[0].count;
}, [
    "subcategory-product-count"
], {
    revalidate: 60 * 60 * 2
});
const getSearchResults = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$unstable$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["unstable_cache"])(async (searchTerm)=>{
    const baseQuery = `
      SELECT
        p.slug,
        p.name,
        p.description,
        p.price,
        p.image_url,
        s.slug AS subcategory_slug,
        c.slug AS category_slug
      FROM products p
      JOIN subcategories s
        ON p.subcategory_slug = s.slug
      JOIN subcollections sc
        ON s.subcollection_id = sc.id
      JOIN categories c
        ON sc.category_slug = c.slug
    `;
    if (searchTerm.length <= 2) {
        const { rows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].query(`
        ${baseQuery}
        WHERE p.name ILIKE $1
        LIMIT 5
        `, [
            `${searchTerm}%`
        ]);
        return rows;
    }
    const tsQuery = searchTerm.split(" ").filter(Boolean).map((t)=>`${t}:*`).join(" & ");
    const { rows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].query(`
      ${baseQuery}
      WHERE to_tsvector('english', p.name)
            @@ to_tsquery('english', $1)
      LIMIT 5
      `, [
        tsQuery
    ]);
    return rows;
}, [
    "search-results"
], {
    revalidate: 60 * 60 * 2
});
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/src/app/api/search/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "GET",
    ()=>GET
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$queries$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/queries.ts [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$queries$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$queries$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
async function GET(request) {
    // format is /api/search?q=term
    const searchTerm = request.nextUrl.searchParams.get("q");
    if (!searchTerm || !searchTerm.length) {
        return Response.json([]);
    }
    const results = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$queries$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getSearchResults"])(searchTerm);
    console.log(results);
    const searchResults = results.map((item)=>{
        const href = `/products/${item.category_slug}/${item.subcategory_slug}/${item.slug}`;
        return {
            ...item.products,
            href
        };
    });
    const response = Response.json(searchResults);
    // cache for 10 minutes
    response.headers.set("Cache-Control", "public, max-age=600");
    return response;
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__701c49a8._.js.map