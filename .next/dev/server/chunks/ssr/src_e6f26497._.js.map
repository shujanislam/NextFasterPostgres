{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/ayan/Programming/NextFasterPostgres/src/components/ui/product-card.tsx"],"sourcesContent":["\"use client\";\nimport { Link } from \"@/components/ui/link\";\nimport NextImage from \"next/image\";\nimport { getImageProps } from \"next/image\";\nimport { Product } from \"@/db/schema\";\nimport { useEffect } from \"react\";\n\nexport function getProductLinkImageProps(\n  imageUrl: string,\n  productName: string,\n) {\n  return getImageProps({\n    width: 48,\n    height: 48,\n    quality: 65,\n    src: imageUrl,\n    alt: `A small picture of ${productName}`,\n  });\n}\n\nexport function ProductLink(props: {\n  imageUrl?: string | null;\n  category_slug: string;\n  subcategory_slug: string;\n  loading: \"eager\" | \"lazy\";\n  product: Product;\n}) {\n  const { category_slug, subcategory_slug, product, imageUrl } = props;\n\n  // prefetch the main image for the product page, if this is too heavy\n  // we could only prefetch the first few cards, then prefetch on hover\n  const prefetchProps = getImageProps({\n    height: 256,\n    quality: 80,\n    width: 256,\n    src: imageUrl ?? \"/placeholder.svg?height=64&width=64\",\n    alt: `A small picture of ${product.name}`,\n  });\n  useEffect(() => {\n    try {\n      const iprops = prefetchProps.props;\n      const img = new Image();\n      // Don't interfer with important requests\n      img.fetchPriority = \"low\";\n      // Don't block the main thread with prefetch images\n      img.decoding = \"async\";\n      // Order is important here, sizes must be set before srcset, srcset must be set before src\n      if (iprops.sizes) img.sizes = iprops.sizes;\n      if (iprops.srcSet) img.srcset = iprops.srcSet;\n      if (iprops.src) img.src = iprops.src;\n    } catch (e) {\n      console.error(\"failed to preload\", prefetchProps.props.src, e);\n    }\n  }, [prefetchProps]);\n  return (\n    <Link\n      prefetch={true}\n      className=\"group flex h-[130px] w-full flex-row border px-4 py-2 hover:bg-gray-100 sm:w-[250px]\"\n      href={`/products/${category_slug}/${subcategory_slug}/${product.slug}`}\n    >\n      <div className=\"py-2\">\n        <NextImage\n          loading={props.loading}\n          decoding=\"sync\"\n          src={imageUrl ?? \"/placeholder.svg?height=48&width=48\"}\n          alt={`A small picture of ${product.name}`}\n          width={48}\n          height={48}\n          quality={65}\n          className=\"h-auto w-12 flex-shrink-0 object-cover\"\n        />\n      </div>\n      <div className=\"px-2\" />\n      <div className=\"h-26 flex flex-grow flex-col items-start py-2\">\n        <div className=\"text-sm font-medium text-gray-700 group-hover:underline\">\n          {product.name}\n        </div>\n        <p className=\"overflow-hidden text-xs\">{product.description}</p>\n      </div>\n    </Link>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAGA;AALA;;;;;;AAOO,SAAS,yBACd,QAAgB,EAChB,WAAmB;IAEnB,OAAO,IAAA,8IAAa,EAAC;QACnB,OAAO;QACP,QAAQ;QACR,SAAS;QACT,KAAK;QACL,KAAK,CAAC,mBAAmB,EAAE,aAAa;IAC1C;AACF;AAEO,SAAS,YAAY,KAM3B;IACC,MAAM,EAAE,aAAa,EAAE,gBAAgB,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG;IAE/D,qEAAqE;IACrE,qEAAqE;IACrE,MAAM,gBAAgB,IAAA,8IAAa,EAAC;QAClC,QAAQ;QACR,SAAS;QACT,OAAO;QACP,KAAK,YAAY;QACjB,KAAK,CAAC,mBAAmB,EAAE,QAAQ,IAAI,EAAE;IAC3C;IACA,IAAA,kNAAS,EAAC;QACR,IAAI;YACF,MAAM,SAAS,cAAc,KAAK;YAClC,MAAM,MAAM,IAAI;YAChB,yCAAyC;YACzC,IAAI,aAAa,GAAG;YACpB,mDAAmD;YACnD,IAAI,QAAQ,GAAG;YACf,0FAA0F;YAC1F,IAAI,OAAO,KAAK,EAAE,IAAI,KAAK,GAAG,OAAO,KAAK;YAC1C,IAAI,OAAO,MAAM,EAAE,IAAI,MAAM,GAAG,OAAO,MAAM;YAC7C,IAAI,OAAO,GAAG,EAAE,IAAI,GAAG,GAAG,OAAO,GAAG;QACtC,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,qBAAqB,cAAc,KAAK,CAAC,GAAG,EAAE;QAC9D;IACF,GAAG;QAAC;KAAc;IAClB,qBACE,8OAAC,wIAAI;QACH,UAAU;QACV,WAAU;QACV,MAAM,CAAC,UAAU,EAAE,cAAc,CAAC,EAAE,iBAAiB,CAAC,EAAE,QAAQ,IAAI,EAAE;;0BAEtE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,wIAAS;oBACR,SAAS,MAAM,OAAO;oBACtB,UAAS;oBACT,KAAK,YAAY;oBACjB,KAAK,CAAC,mBAAmB,EAAE,QAAQ,IAAI,EAAE;oBACzC,OAAO;oBACP,QAAQ;oBACR,SAAS;oBACT,WAAU;;;;;;;;;;;0BAGd,8OAAC;gBAAI,WAAU;;;;;;0BACf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACZ,QAAQ,IAAI;;;;;;kCAEf,8OAAC;wBAAE,WAAU;kCAA2B,QAAQ,WAAW;;;;;;;;;;;;;;;;;;AAInE"}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///home/ayan/Programming/NextFasterPostgres/src/lib/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { getCart, updateCart } from \"./cart\";\n\nexport async function addToCart(prevState: unknown, formData: FormData) {\n  const prevCart = await getCart();\n  const productSlug = formData.get(\"productSlug\");\n  if (typeof productSlug !== \"string\") {\n    return;\n  }\n  const itemAlreadyExists = prevCart.find(\n    (item) => item.productSlug === productSlug,\n  );\n  if (itemAlreadyExists) {\n    const newQuantity = itemAlreadyExists.quantity + 1;\n    const newCart = prevCart.map((item) => {\n      if (item.productSlug === productSlug) {\n        return {\n          ...item,\n          quantity: newQuantity,\n        };\n      }\n      return item;\n    });\n    await updateCart(newCart);\n  } else {\n    const newCart = [\n      ...prevCart,\n      {\n        productSlug,\n        quantity: 1,\n      },\n    ];\n    await updateCart(newCart);\n  }\n\n  return \"Item added to cart\";\n}\n\nexport async function removeFromCart(formData: FormData) {\n  const prevCart = await getCart();\n  const productSlug = formData.get(\"productSlug\");\n  if (typeof productSlug !== \"string\") {\n    return;\n  }\n  const itemAlreadyExists = prevCart.find(\n    (item) => item.productSlug === productSlug,\n  );\n  if (!itemAlreadyExists) {\n    return;\n  }\n  const newCart = prevCart.filter((item) => item.productSlug !== productSlug);\n  await updateCart(newCart);\n}\n"],"names":[],"mappings":";;;;;;;IAIsB,YAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///home/ayan/Programming/NextFasterPostgres/src/components/add-to-cart-form.tsx"],"sourcesContent":["\"use client\";\nimport { useActionState } from \"react\";\nimport { addToCart } from \"@/lib/actions\";\n\nexport function AddToCartForm({ productSlug }: { productSlug: string }) {\n  const [message, formAction, isPending] = useActionState(addToCart, null);\n  return (\n    <form className=\"flex flex-col gap-2\" action={formAction}>\n      <input type=\"hidden\" name=\"productSlug\" value={productSlug} />\n      <button\n        type=\"submit\"\n        className=\"max-w-[150px] rounded-[2px] bg-accent1 px-5 py-1 text-sm font-semibold text-white\"\n      >\n        Add to cart\n      </button>\n      {isPending && <p>Adding to cart...</p>}\n      {!isPending && message && <p>{message}</p>}\n    </form>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIO,SAAS,cAAc,EAAE,WAAW,EAA2B;IACpE,MAAM,CAAC,SAAS,YAAY,UAAU,GAAG,IAAA,uNAAc,EAAC,+JAAS,EAAE;IACnE,qBACE,8OAAC;QAAK,WAAU;QAAsB,QAAQ;;0BAC5C,8OAAC;gBAAM,MAAK;gBAAS,MAAK;gBAAc,OAAO;;;;;;0BAC/C,8OAAC;gBACC,MAAK;gBACL,WAAU;0BACX;;;;;;YAGA,2BAAa,8OAAC;0BAAE;;;;;;YAChB,CAAC,aAAa,yBAAW,8OAAC;0BAAG;;;;;;;;;;;;AAGpC"}}]
}